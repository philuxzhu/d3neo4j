<!DOCTYPE html>
<html>
    <head>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.9.0/d3.js"></script>
        <script src="../lib/d3neo4j.js"></script>

        <link rel="stylesheet" href="../lib/d3neo4j.css">

        <style>
            html, body {
                height: 100%;
                width: 100%;
                padding: 0px;
                margin: 0px;
            }
        </style>
    </head>
    <body>
        <div id="neo4jd3" style="width: 100%; height: 100%;"></div>


        <script>

            const graphData = 
            {
    "results": [
        {
            "columns": [
                "user",
                "entity"
            ],
            "data": [
                {
                    "graph": {
                        "nodes": [
                            {
                                "id": "1001",
                                "name": "Anna Schmidt",
                                "labels": ["Person"],
                                "properties": {}
                            },
                            {
                                "id": "1002",
                                "name": "Ben Müller",
                                "labels": ["Person"],
                                "properties": {}
                            },
                            {
                                "id": "1003",
                                "name": "Clara Weber",
                                "labels": ["Person"],
                                "properties": {}
                            },
                            {
                                "id": "1004",
                                "name": "David Fischer",
                                "labels": ["Person"],
                                "properties": {}
                            },
                            {
                                "id": "2001",
                                "name": "TechCorp GmbH",
                                "labels": ["Unternehmen"],
                                "properties": {}
                            }
                        ],
                        "relationships": [
                            {
                                "id": "R100",
                                "type": "Freund",
                                "startNode": "1001",
                                "endNode": "1002",
                                "properties": {}
                            },
                            {
                                "id": "R101",
                                "type": "Arbeitskollege",
                                "startNode": "1002",
                                "endNode": "1003",
                                "properties": {}
                            },
                            {
                                "id": "R102",
                                "type": "Angestellter",
                                "startNode": "1003",
                                "endNode": "2001",
                                "properties": {}
                            },
                            {
                                "id": "R103",
                                "type": "Chef",
                                "startNode": "1004",
                                "endNode": "2001",
                                "properties": {}
                            }
                        ]
                    }
                }
            ]
        }
    ],
    "errors": []
}

                function closeModal() {
                    const modal = document.getElementById('nodeModal');
                    if (modal) {
                        modal.style.display = 'none';
                    }
                }

                // 点击模态框外部关闭
                window.addEventListener('click', function(event) {
                    const modal = document.getElementById('nodeModal');
                    if (modal && modal.style.display === 'block') {
                        // 如果点击的不是模态框内容区域
                        if (!event.target.closest('.modal-content')) {
                            closeModal();
                        }
                    }
                });


                new d3Neo4J('#neo4jd3', {
                    highlight: [
                        {
                            id: "1004"
                        }
                    ],
                    neo4jData: graphData,
                    infoPanel: false,
                    minCollision: 100,
                    nodeRadius: 25,
                    showNodeLabel: true,
                    nodeLabelFunction: node => node.name
                });

        </script>
    </body>
</html>